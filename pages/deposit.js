import { useState } from 'react';
import { auth, db, storage } from '@/lib/firebase';
import { onAuthStateChanged } from 'firebase/auth';
import { addDoc, collection, serverTimestamp } from 'firebase/firestore';
export default function Deposit(){ const [amount,setAmount]=useState(''); const [method,setMethod]=useState('vodafone'); const [msg,setMsg]=useState(''); const [user,setUser]=useState(null); onAuthStateChanged(auth,u=>setUser(u)); const submit=async(e)=>{ e.preventDefault(); if(!user){alert('سجل دخول');return;} await addDoc(collection(db,'payments'),{userId:user.uid,amount:Number(amount),method,status:'pending',type:'deposit',createdAt:serverTimestamp()}); setMsg('تم إرسال الطلب قيد المراجعة'); }; return (<div className='py-8'><h2 className='text-2xl mb-4'>إيداع</h2><div className='card max-w-md'><input className='input' placeholder='المبلغ' value={amount} onChange={e=>setAmount(e.target.value)}/><select className='input' value={method} onChange={e=>setMethod(e.target.value)}><option value='vodafone'>Vodafone Cash</option><option value='paypal'>PayPal</option></select><div style={{marginTop:8}}><button className='btn btn-primary' onClick={submit}>تأكيد</button></div>{msg && <div className='small mt-2'>{msg}</div>}</div></div>); }
